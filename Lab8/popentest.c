/* popen.c demonstrate the popen function. */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(){
	char* cmd;
	int n = read(STDIN_FILENO, cmd, BUFSIZ);
	char* fname;
	n = read(STDIN_FILENO, fname, BUFSIZ);
	printf("%d\n", n);
	char buf[BUFSIZ]; /* BUFSIZ =1024 defined in stdio.h */
	FILE *ptr;
	if ((ptr = popen(cmd, "r")) != NULL)
		while (fgets(buf, BUFSIZ, ptr) != NULL)
			(void) printf("%s", buf);
	pclose(ptr);
	return 0;
}
